{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice #{{ invoice.id }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#b01116',
                    },
                },
            },
        }
    </script>
    <style>
        @page {
            size: A4;
            margin: 0;
        }
        @media print {
            body {
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
                margin: 0;
                padding: 0;
            }
            .no-print {
                display: none;
            }
            .invoice-container {
                margin: 0 !important;
                box-shadow: none !important;
            }
        }
        body {
            font-size: 9px;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .invoice-container {
            width: 21cm;
            height: 29.7cm;
            margin: 1rem auto;
            position: relative;
            background: white;
            overflow: hidden;
        }
        .watermark {
            position: absolute;
            top: 34%;
            left: 64%;
            transform: translate(-50%, -50%) rotate(-31deg);
            opacity: 0.1;
            font-size: 80px;
            font-weight: bold;
            color: #000;
            white-space: nowrap;
            z-index: 1;
            width: 100%;
            text-align: center;
        }
        .content {
            position: relative;
            z-index: 2;
            height: 100%;
            padding: 1.5rem;
            box-sizing: border-box;
        }
        .company-logo {
            width: 120px;
            height: auto;
            margin-bottom: 1rem;
        }
        .header-divider {
            height: 2px;
            background-color: #b01116;
            margin: 1rem 0;
        }
        .company-details {
            margin-top: 0.5rem;
            line-height: 1.4;
        }
    </style>
    <script>
        window.onload = function() { window.print(); }
        function handlePrint() {
            window.print();
        }
    </script>
</head>
<body class="bg-gray-100">
    <div class="no-print">
        <button onclick="handlePrint()" class="bg-primary text-white px-4 py-2 rounded m-4">Print Order</button>
    </div>
    <div class="invoice-container shadow-md">
        <div class="watermark">
                                <img src="{% static 'images/logo.png' %}" alt="{{ company.name }}" class="">

        </div>
        <div class="w-[21cm] h-[29.7cm] mx-auto my-8 p-8 bg-white shadow-md">
            <!-- Header Section -->
            <div class="flex justify-between items-start mb-4">
                <div class="w-2/3">
                    <img src="{% static 'images/logo.png' %}" alt="{{ company.name }}" class="company-logo">
                    <!-- <div class="company-details">
                        <h1 class="font-bold text-base mb-1">{{ company.name }}</h1>
                        <p class="text-xs mb-0.5">{{ company.address }}</p>
                        <p class="text-xs mb-0.5">Phone: {{ company.phone }}</p>
                        <p class="text-xs">Website: {{ company.website }}</p>
                    </div> -->
                </div>
                <div class="w-1/3 text-right">
                    <h1 class="text-2xl font-bold text-primary mb-2">Sales ORDER</h1>
                    <p class="text-xs mb-0.5">Date: {{ sales_order.order_date|date:"m/d/Y" }}</p>
                    <p class="text-xs">SO #: {{ sales_order.id }}</p>
                </div>
            </div>

        <!-- Vendor and Ship To Section -->
        <div class="flex mb-4">
            <div class="w-1/2 pr-2">
                <div class="bg-primary text-white px-2 py-1 mb-1">
                    <h2 class="font-bold text-xs">From</h2>
                </div>
                <div class="border border-gray-300 p-1">
                    <p class="text-xs">{{ company.name }}</p>
                    <p class="text-xs">{{ company.address }}</p>
                    <p class="text-xs">Phone: {{ company.phone }}</p>
                    <p class="text-xs">Email: {{ company.email }}</p>
                </div>
            </div>
            <div class="w-1/2 pl-2">
                <div class="bg-primary text-white px-2 py-1 mb-1">
                    <h2 class="font-bold text-xs"> TO</h2>
                </div>
                <div class="border border-gray-300 p-1">
                    <p class="text-xs">{{ sales_order.customer.name }}</p>
                    <p class="text-xs">{{ sales_order.customer.address }}</p>
                    <p class="text-xs">Phone: {{ sales_order.customer.phone }}</p>
                    <p class="text-xs">Email: {{ sales_order.customer.email }}</p>
                </div>
            </div>
        </div>



        <!-- Order Items Table -->
        <table class="w-full mb-4 border-collapse border border-gray-300">
            <thead>
                <tr class="bg-primary text-white text-xs">
                    <th class="px-2 py-1 text-left border border-gray-300">ITEM #</th>
                    <th class="px-2 py-1 text-left border border-gray-300">PRODUCT NAME</th>
                    <th class="px-2 py-1 text-left border border-gray-300">QTY</th>
                    <th class="px-2 py-1 text-left border border-gray-300">UNIT PRICE</th>
                    <th class="px-2 py-1 text-left border border-gray-300">UNIT DISCOUNT</th>
                    <th class="px-2 py-1 text-left border border-gray-300">TOTAL</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr class="border-b border-gray-300 text-xs">
                    <td class="px-2 py-1 border border-gray-300">{{ forloop.counter }}</td>
                    <td class="px-2 py-1 border border-gray-300">{{ item.product.name }}</td>
                    <td class="px-2 py-1 border border-gray-300">{{ item.quantity }}</td>
                    <td class="px-2 py-1 border border-gray-300">{{item.unit_price|floatformat:2 }}</td>
                    <td class="px-2 py-1 border border-gray-300">{{item.Unit_discount|floatformat:2 }}</td>
                    <td class="px-2 py-1 border border-gray-300">{{item.total|floatformat:2 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Comments and Totals -->
        <div class="flex">
            <div class="w-2/3 pr-2">
                <div class="border border-gray-300">
                    <div class="bg-gray-200 px-2 py-1">
                        <h2 class="font-bold text-xs">Comments or Special Instructions</h2>
                    </div>
                    <div class="p-2 h-20 text-xs">{{ sales_order.notes|default:"" }}</div>
                </div>
            </div>
            <div class="w-1/3">
                <table class="w-full text-xs border-collapse">
                    <tr class="border border-gray-300">
                        <td class="px-2 py-1">SUBTOTAL</td>
                        <td class="px-2 py-1 text-right">{{subtotal|floatformat:2 }}</td>
                    </tr>
                    <tr class="border border-gray-300">
                        <td class="px-2 py-1">TAX</td>
                        <td class="px-2 py-1 text-right">{{tax|floatformat:2 }}</td>
                    </tr>
                    <tr class="border border-gray-300">
                        <td class="px-2 py-1">Discount</td>
                        <td class="px-2 py-1 text-right">{{discount|floatformat:2 }}</td>
                    </tr>
                    <tr class="border border-gray-300">
                        <td class="px-2 py-1">Shipping</td>
                        <td class="px-2 py-1 text-right">{{shipping|floatformat:2 }}</td>
                    </tr>
                    <tr class="border border-gray-300 font-bold">
                        <td class="px-2 py-1">TOTAL</td>
                        <td class="px-2 py-1 text-right">{{total|floatformat:2 }}</td>
                    </tr>
                </table>
            </div>
        </div>

        {% comment %} <!-- Footer -->
        <div class="mt-4 text-xs text-center text-gray-600">
            <p>If you have any questions about this purchase order, please contact</p>
            <p>{{ company.name }}, Phone: {{ company.phone }}, Email: {{ company.email }}</p>
        </div> {% endcomment %}
    </div>
	 </div>
</body>
</html>

